import React, { useContext } from 'react';
import { NavLink, useNavigate } from 'react-router-dom';
import { toast } from 'react-toastify';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faXmark } from '@fortawesome/free-solid-svg-icons';
import { AuthContext } from '../context/auth';

//assets
import Logo from '../assets/logo.svg';

// utils
import { signOutUser } from '../utils/firebase';
import storageUtils from '../utils/storageUtils';

interface SideLinkProp {
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  icon: any;
  href: string;
  text: string;
  isDisabled: boolean;
}

const sideBarLinks: SideLinkProp[] = [
  {
    icon: (
      <svg
        width="24"
        height="25"
        viewBox="0 0 24 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M3.99976 13.0889H9.99976C10.265 13.0889 10.5193 12.9835 10.7069 12.796C10.8944 12.6084 10.9998 12.3541 10.9998 12.0889V4.08887C10.9998 3.82365 10.8944 3.5693 10.7069 3.38176C10.5193 3.19422 10.265 3.08887 9.99976 3.08887H3.99976C3.73454 3.08887 3.48019 3.19422 3.29265 3.38176C3.10511 3.5693 2.99976 3.82365 2.99976 4.08887V12.0889C2.99976 12.3541 3.10511 12.6084 3.29265 12.796C3.48019 12.9835 3.73454 13.0889 3.99976 13.0889ZM2.99976 20.0889C2.99976 20.3541 3.10511 20.6084 3.29265 20.796C3.48019 20.9835 3.73454 21.0889 3.99976 21.0889H9.99976C10.265 21.0889 10.5193 20.9835 10.7069 20.796C10.8944 20.6084 10.9998 20.3541 10.9998 20.0889V16.0889C10.9998 15.8237 10.8944 15.5693 10.7069 15.3818C10.5193 15.1942 10.265 15.0889 9.99976 15.0889H3.99976C3.73454 15.0889 3.48019 15.1942 3.29265 15.3818C3.10511 15.5693 2.99976 15.8237 2.99976 16.0889V20.0889ZM12.9998 20.0889C12.9998 20.3541 13.1051 20.6084 13.2927 20.796C13.4802 20.9835 13.7345 21.0889 13.9998 21.0889H19.9998C20.265 21.0889 20.5193 20.9835 20.7069 20.796C20.8944 20.6084 20.9998 20.3541 20.9998 20.0889V13.0889C20.9998 12.8237 20.8944 12.5693 20.7069 12.3818C20.5193 12.1942 20.265 12.0889 19.9998 12.0889H13.9998C13.7345 12.0889 13.4802 12.1942 13.2927 12.3818C13.1051 12.5693 12.9998 12.8237 12.9998 13.0889V20.0889ZM13.9998 10.0889H19.9998C20.265 10.0889 20.5193 9.98351 20.7069 9.79597C20.8944 9.60844 20.9998 9.35408 20.9998 9.08887V4.08887C20.9998 3.82365 20.8944 3.5693 20.7069 3.38176C20.5193 3.19422 20.265 3.08887 19.9998 3.08887H13.9998C13.7345 3.08887 13.4802 3.19422 13.2927 3.38176C13.1051 3.5693 12.9998 3.82365 12.9998 4.08887V9.08887C12.9998 9.35408 13.1051 9.60844 13.2927 9.79597C13.4802 9.98351 13.7345 10.0889 13.9998 10.0889Z"
          fill="#F4AA00"
        />
      </svg>
    ),
    href: '/dashboard',
    text: 'Dashboard',
    isDisabled: false,
  },
  {
    icon: (
      <svg
        width="24"
        height="25"
        viewBox="0 0 24 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M21.4462 3.50219C21.4893 3.39441 21.4999 3.27634 21.4766 3.16262C21.4532 3.0489 21.3971 2.94452 21.315 2.86243C21.2329 2.78034 21.1285 2.72415 21.0148 2.70082C20.901 2.67749 20.783 2.68805 20.6752 2.73119L3.42019 9.63343H3.41901L2.88286 9.84694C2.78132 9.88745 2.69294 9.95523 2.6275 10.0428C2.56206 10.1304 2.5221 10.2344 2.51204 10.3432C2.50198 10.4521 2.5222 10.5616 2.57047 10.6597C2.61875 10.7578 2.6932 10.8406 2.7856 10.8991L3.27192 11.2075L3.27311 11.2098L9.19796 14.9794L12.9676 20.9043L12.9699 20.9067L13.2783 21.393C13.337 21.485 13.4198 21.5591 13.5179 21.6071C13.6159 21.655 13.7252 21.675 13.8339 21.6649C13.9425 21.6547 14.0463 21.6147 14.1337 21.5494C14.2211 21.484 14.2888 21.3959 14.3293 21.2945L21.4462 3.50219ZM19.272 5.74403L10.3829 14.6331L10.1279 14.2322C10.0812 14.1586 10.0188 14.0962 9.94523 14.0495L9.54431 13.7945L18.4334 4.90542L19.8307 4.34674L19.2732 5.74403H19.272Z"
          fill="white"
        />
      </svg>
    ),
    href: '/make-payment',
    text: 'Make Payment',
    isDisabled: false,
  },
  {
    icon: (
      <svg
        width="24"
        height="25"
        viewBox="0 0 24 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M18.4998 4.44458H5.49976C4.94747 4.44458 4.49976 4.8923 4.49976 5.44458V21.4446C4.49976 21.9969 4.94747 22.4446 5.49976 22.4446H18.4998C19.052 22.4446 19.4998 21.9969 19.4998 21.4446V5.44458C19.4998 4.8923 19.052 4.44458 18.4998 4.44458Z"
          fill="white"
          stroke="white"
          stroke-width="1.5"
          stroke-linejoin="round"
        />
        <path
          d="M8 17.9446H12M9 2.44458V5.44458V2.44458ZM15 2.44458V5.44458V2.44458ZM8 9.94458H16H8ZM8 13.9446H14H8Z"
          stroke="#14142D"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    ),
    href: '/transactions',
    text: 'Transactions',
    isDisabled: false,
  },
  {
    icon: (
      <svg
        width="24"
        height="25"
        viewBox="0 0 24 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M2.99976 10.7834C2.99976 6.77945 6.24576 3.53345 10.2498 3.53345H13.7498C17.7538 3.53345 20.9998 6.77945 20.9998 10.7834C20.9998 14.7874 17.7538 18.0334 13.7498 18.0334H13.3998V21.5334C13.3998 21.5334 2.99976 19.7834 2.99976 10.7834ZM13.8453 6.77445C14.3603 7.11645 14.7488 7.67095 14.7488 8.41445C14.7488 9.20345 14.4303 9.78345 13.9148 10.1384C13.7112 10.2762 13.4866 10.3799 13.2498 10.4454V11.2114C13.2498 11.3099 13.2304 11.4075 13.1927 11.4985C13.155 11.5895 13.0997 11.6721 13.0301 11.7418C12.9604 11.8114 12.8778 11.8667 12.7868 11.9044C12.6958 11.942 12.5982 11.9614 12.4998 11.9614C12.4013 11.9614 12.3037 11.942 12.2127 11.9044C12.1217 11.8667 12.0391 11.8114 11.9694 11.7418C11.8998 11.6721 11.8445 11.5895 11.8068 11.4985C11.7692 11.4075 11.7498 11.3099 11.7498 11.2114V9.81295C11.7497 9.62266 11.822 9.43947 11.952 9.30049C12.082 9.16151 12.2599 9.07713 12.4498 9.06445C12.7268 9.04595 12.9368 8.99095 13.0638 8.90345C13.115 8.86946 13.1564 8.82255 13.1838 8.76745C13.2138 8.70745 13.2488 8.60045 13.2488 8.41395C13.2488 8.25745 13.1873 8.13795 13.0148 8.02295C12.8188 7.89295 12.5038 7.79695 12.1253 7.78495C11.7513 7.77295 11.3878 7.84595 11.1203 7.97545C10.8523 8.10545 10.7543 8.25145 10.7263 8.35895C10.7036 8.45623 10.6617 8.54801 10.603 8.62888C10.5444 8.70975 10.4702 8.7781 10.3848 8.8299C10.2994 8.8817 10.2045 8.91592 10.1056 8.93054C10.0068 8.94516 9.90606 8.93989 9.80931 8.91505C9.71255 8.8902 9.62173 8.84627 9.54218 8.78585C9.46264 8.72542 9.39596 8.64971 9.34607 8.56316C9.29619 8.47662 9.26409 8.38097 9.25167 8.28185C9.23925 8.18273 9.24676 8.08213 9.27376 7.98595C9.44576 7.31545 9.94776 6.87745 10.4663 6.62595C10.9863 6.37345 11.5978 6.26695 12.1733 6.28545C12.7443 6.30345 13.3543 6.44745 13.8453 6.77445ZM12.4998 15.0334C12.765 15.0334 13.0193 14.9281 13.2069 14.7406C13.3944 14.553 13.4998 14.2987 13.4998 14.0334C13.4998 13.7682 13.3944 13.5139 13.2069 13.3263C13.0193 13.1388 12.765 13.0334 12.4998 13.0334C12.2345 13.0334 11.9802 13.1388 11.7927 13.3263C11.6051 13.5139 11.4998 13.7682 11.4998 14.0334C11.4998 14.2987 11.6051 14.553 11.7927 14.7406C11.9802 14.9281 12.2345 15.0334 12.4998 15.0334Z"
          fill="white"
        />
      </svg>
    ),
    href: '/support',
    text: 'Support',
    isDisabled: true,
  },
];

const SideBar: React.FC = () => {
  const navigate = useNavigate();

  const { handleMobile } = useContext(AuthContext);

  const handleLogOut = () => {
    signOutUser();
    storageUtils.clearStorage();
    toast.info('ðŸ¦„ logged out user!', {
      position: 'top-right',
      autoClose: 5000,
      hideProgressBar: false,
      closeOnClick: true,
      pauseOnHover: true,
      draggable: true,
      progress: undefined,
      theme: 'light',
    });
    navigate('/');
  };
  return (
    <div className="w-full h-[100vh] relative flex flex-col justify-between bg-[#14142D] text-white">
      {/* dashbord nav */}
      <div className="block w-full relative ">
        <div className="h-[160px] relative flex flex-col justify-center items-center">
          {/* dashboard cancel button on mobile */}
          <FontAwesomeIcon
            icon={faXmark}
            className="text-white w-[32px] h-[32px] self-end pb-5 px-4 md:hidden"
            onClick={handleMobile}
          />
          <div className="w-[60%] mx-auto relative">
            <img src={Logo} alt="logo-img" className="py-4 " />
          </div>
        </div>

        {/* dashboard menu items list */}
        <div className="w-full my-2 relative">
          {sideBarLinks.map((linkItem, _idx) => (
            <NavLink
              onClick={() => {}}
              key={_idx}
              to={linkItem.href}
              className={({ isActive }) =>
                `w-[70%] mx-auto py-4 flex  items-center font-[500] text-[16px] ${
                  linkItem.isDisabled && 'pointer-events-none'
                }   ${
                  isActive ? 'text-[#F4AA00] active' : 'nav-link text-white'
                }`
              }
            >
              {linkItem.icon}
              <span className="mx-4 whitespace-nowrap  text-[14px] md:text-[16px]">
                {linkItem.text}
              </span>
              {linkItem.isDisabled && (
                <small className="text-[#508FCE] text-[600] text-[8px] p-2 rounded-full bg-[#1C1C40]">
                  coming soon
                </small>
              )}
            </NavLink>
          ))}
        </div>
      </div>
      <div
        className=" logout w-[70%] mx-auto relative flex mb-[40px] cursor-pointer"
        onClick={handleLogOut}
      >
        <svg
          width="24"
          height="25"
          viewBox="0 0 24 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4.99976 5.3999H10.9998C11.5498 5.3999 11.9998 4.9499 11.9998 4.3999C11.9998 3.8499 11.5498 3.3999 10.9998 3.3999H4.99976C3.89976 3.3999 2.99976 4.2999 2.99976 5.3999V19.3999C2.99976 20.4999 3.89976 21.3999 4.99976 21.3999H10.9998C11.5498 21.3999 11.9998 20.9499 11.9998 20.3999C11.9998 19.8499 11.5498 19.3999 10.9998 19.3999H4.99976V5.3999Z"
            fill="white"
          />
          <path
            d="M20.6498 12.0499L17.8598 9.25994C17.7902 9.18849 17.7009 9.13942 17.6033 9.11901C17.5057 9.0986 17.4043 9.10777 17.3119 9.14536C17.2195 9.18294 17.1405 9.24723 17.0849 9.32999C17.0293 9.41276 16.9996 9.51023 16.9998 9.60994V11.3999H9.99976C9.44976 11.3999 8.99976 11.8499 8.99976 12.3999C8.99976 12.9499 9.44976 13.3999 9.99976 13.3999H16.9998V15.1899C16.9998 15.6399 17.5398 15.8599 17.8498 15.5399L20.6398 12.7499C20.8398 12.5599 20.8398 12.2399 20.6498 12.0499Z"
            fill="white"
          />
        </svg>
        <span className="font-[500] text-[16px] mx-4">Log out</span>
      </div>
    </div>
  );
};

export default SideBar;
